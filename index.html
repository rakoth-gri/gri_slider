<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- GOOGLE API FONTS -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <title>SLIDER</title>
    <link rel="stylesheet" href="./gri-slider/index.min.css" />
    <script src="index.js" defer type="module"></script>
    <style>
      body {
        background-color: #94b3b3;
      }

      main {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        position: relative;
      }

      h1 {
        font-family: "Merienda";
        font-weight: 700;
        top: 3%;
        position: absolute;
        left: 3%;
        color: purple;
      }

      figure {
        font-family: "Merienda";
        bottom: 3%;
        position: absolute;
        right: 3%;
        color: purple;
      }

      figcaption {
        width: 80%;
        margin: 0.35rem auto;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>GRI_SLIDER</h1>
      <section class="gri-slider">
        <div class="gri-slider__prev">
          <!-- RENDER -->
        </div>
        <div class="gri-slider__body">
          <!-- RENDER -->
        </div>
        <div class="gri-slider__next">
          <!-- RENDER -->
        </div>
      </section>
      <figure class="audio">
        <figcaption>Listen to Eric Johnson's SRV:</figcaption>
        <audio src="./src/audio/ej_srv.mp3" id="audio"></audio>
        <div class="audio__panel">
          <span class="material-symbols-outlined audio__play">
            play_arrow
          </span>
          <span class="material-symbols-outlined audio__pause"> pause </span>
          <span class="material-symbols-outlined audio__stop">
            stop_circle
          </span>
          <span class="material-symbols-outlined audio__loop"> laps </span>
          <span>            
            <progress
              class="audio__progress"
              min="0"
              max="100"
              value="1"
            ></progress>
          </span>
          <span class="material-symbols-outlined audio__mute"> volume_off </span>
        </div>
      </figure>
    </main>

    <script>
      const audio = document.getElementById("audio");
      const playBtn = document.querySelector(".audio__play");
      const pauseBtn = document.querySelector(".audio__pause");
      const progress = document.querySelector(".audio__progress");
      const stopBtn = document.querySelector(".audio__stop");
      const loopBtn = document.querySelector(".audio__loop");
      const muteBtn = document.querySelector(".audio__mute");


      audio.oncanplaythrough = function () {
        this.volume = 0.15;
      };

      playBtn.onclick = function () {
        if (audio.paused) {
          playAudio();
          this.style.color = "gold";
        } else {
          audio.pause();
          this.style.color = null;
        }
      };

      stopBtn.onclick = function () {
        if (!audio.paused) {
          audio.pause();
          audio.currentTime = 0;
        }
      };

      muteBtn.onclick = function () {
        if (audio.volume) {
          audio.volume = 0;
          this.style.color = "gold";
          return;
        }
        this.style.color = null;
        return audio.volume = 0.15
      };

      loopBtn.onclick = function () {
        if (!audio.loop) {
          audio.loop = true;
          this.style.color = "gold";
        } else {
          audio.loop = false;
          this.style.color = null;
        }
      };

      pauseBtn.onclick = function () {
        if (!audio.paused) audio.pause();
      };

      audio.addEventListener("timeupdate", function () {
        currCompletePerc = (this.currentTime * 100) / this.duration;
        progress.value = currCompletePerc;
      });

      async function playAudio() {
        try {
          await audio.play();
        } catch (err) {
          console.error(err.message);
        }
      }
    </script>
  </body>
</html>
